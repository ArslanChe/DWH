# Задача
В данном задании требовалось:
  Реализовать реплекацию из master в slave, используя docker.\
  Настроить DDL для структуры в SQL-файл.\
  Настроить автоматическую инициализацию БД c данной структурой.\
  Поднять инстанс в PostgreSQL в docker-compose.\
  
# Требования
  На устройстве должен быть установлен Docker и PostgreSQL (Для удобства использовать DataGrip).
# Решение
Для начала был написан **docker-compose.yml**, с помощью создается **master_db**.\
Затем был написан файл **createdb.sql**, который настраивает структуру DDL.\
Для настройки репликации были созданы **conf** файлы:\
  **pg_hba** разрешает подключаться replica к master\
  **postgresql.conf** настройка репликации\
  **postgresql.auto.conf** показывает с какими данными и куда реплика должна подключаться\
Для насройки автоматизации были реализованые sh файлы:\
  **backup-master.sh** создает копию данных из master для slave\
  **create-replica-user.sh** создает юзера, у которого есть доступ к репликации\
  **init.sh** запуск инициализации master\
  **init-slave.sh** запуск инициализации replica\
# Работа программы
0. Были подготовленые файлы с данными [**aircrafts.csv, airports.csv, boarding_passes.csv, bookings.csv, flights.csv, seats.csv, ticket_flights.csv, tickets.csv**], которые указываются в volumes в docker-compose.yml
1. Запустить Docker
2. Перейти в папку с **docker-compose.yml**
3. В терминале выполнить скрипт **docker-init.sh** (```bash docker-init.sh```)
4. Настроить 2 data source на портах 5432 и 5433 с user = postgres и password = postgres
5. Репликация запущена

### Дополнительно было выполнено бонусное задание: скрипт, который считает пассажиропоток аэропорта на вылет и прилет.\
Для проверки работы скрипта, нужно выполнить все вышеперечисленные пункты и отдельно запустить **bonus_script.sql**.

**Задание выполнено на 9 баллов**\
**Основным источником информации был**:\
  https://github.com/mgcrp/hse_se_dwh_course_2024
  

